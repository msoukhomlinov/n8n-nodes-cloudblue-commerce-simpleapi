# Project Tracking Maintenance Rules
rules:
  - name: "Project Tracking Check"
    on: "conversation_start"
    do: "read_project_status"
    files:
      - ".project-tracker/notepads/goals.yaml"
      - ".project-tracker/notepads/context.yaml"
      - ".project-tracker/notepads/progress.yaml"
      - ".project-tracker/notepads/knowledge.yaml"
    message: "Reading project status and notepads..."

  - name: "Progress Update Required"
    on: "code_change"
    do: "update_tracking"
    files:
      - ".project-tracker/progress/phases.yaml"
      - ".project-tracker/notepads/progress.yaml"
      - ".project-tracker/notepads/context.yaml"
    message: "Code changed. Update progress tracking."

  - name: "Notepad Sync Required"
    on: "phase_change"
    do: "sync_notepads"
    files:
      - ".project-tracker/notepads/context.yaml"
      - ".project-tracker/notepads/progress.yaml"
      - ".project-tracker/notepads/goals.yaml"
    message: "Phase changed. Sync context and progress notepads."

  - name: "Knowledge Update Required"
    on: "technical_decision"
    do: "update_knowledge"
    files:
      - ".project-tracker/notepads/knowledge.yaml"
      - ".project-tracker/records/decisions/"
      - ".project-tracker/notepads/context.yaml"
    message: "Technical decision made. Update knowledge base."

  - name: "Goals Alignment Check"
    on: "milestone_complete"
    do: "verify_goals"
    files:
      - ".project-tracker/notepads/goals.yaml"
      - ".project-tracker/notepads/progress.yaml"
      - ".project-tracker/progress/phases.yaml"
    message: "Milestone reached. Verify alignment with goals."

  - name: "Changelog Update Required"
    on: "code_change"
    do: "update_changelog"
    files:
      - "CHANGELOG.md"
      - ".project-tracker/notepads/progress.yaml"
    message: "Code changed. Update changelog and progress."

  - name: "Structure Verification"
    on: "file_change"
    in: ".project-tracker/"
    do: "verify_structure"
    message: "Verifying project structure..."

  - name: "Quality Gate Check"
    on: "status_change"
    to: "completed"
    do: "verify_calibration"
    message: "Running quality checks..."
